<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">

<link rel="import" href="../system-api/system-api.html">
<link rel="import" href="../display-configuration/display-configuration.html">

<dom-module id="terra-pictura-app">
    <template>
        <style is="custom-style" include="iron-flex iron-flex-alignment iron-positioning">
        :host {
            display: block;
            @apply --layout-vertical;
            --paper-tabs-selection-bar-color: var(--light-primary-color);
            --paper-tab-ink: white;
            --paper-tabs: {
                background-color: var(--primary-color);
                color: white;
            }
            --paper-tabs-selection-bar: {
                border-bottom-width: 4px;
            }
        }
        
        paper-dropdown-menu,
        paper-listbox {
            width: 250px;
        }
        
        paper-material {
            margin: 20px;
            margin-top: 0;
        }
        
        paper-material > paper-tabs {
            border-top-left-radius: 2px;
            border-top-right-radius: 2px;
        }
        
        iron-pages#configuration-pages {
            padding: 20px;
        }
        
        .header-main {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
        }
        </style>

        <system-api id="system" mock="[[_mock]]"></system-api>

        <div class="header-main">
            <h1>Terra Pictura</h1>
        </div>

        <div class="flex layout vertical center">
            <paper-dropdown-menu label="Update frequency">
                <paper-listbox class="dropdown-content" selected="{{config.frequency}}" attr-for-selected="name">
                    <template is="dom-repeat" items="[[_updateFrequencies]]">
                        <paper-item name="[[item.value]]">[[item.title]]</paper-item>
                    </template>
                </paper-listbox>
            </paper-dropdown-menu>

            <paper-radio-group selected="{{config.type}}">
                <template is="dom-repeat" items="[[_configurationTypes]]">
                    <paper-radio-button name="[[item.value]]">[[item.title]]</paper-radio-button>
                </template>
            </paper-radio-group>

            <paper-material class="flex self-stretch" elevation="1">
                <paper-tabs selected="{{_display}}" attr-for-selected="name">
                    <template is="dom-repeat" items="[[_displays]]">
                        <paper-tab name="[[item.id]]">[[item.name]]</paper-tab>
                    </template>
                </paper-tabs>
                <iron-pages id="configuration-pages" class="flex self-stretch" selected="[[_display]]" attr-for-selected="name">
                    <template is="dom-repeat" items="[[_displays]]">
                        <display-configuration name="[[item.id]]" display="[[item]]"></display-configuration>
                    </template>
                </iron-pages>
            </paper-material>
        </div>
    </template>
    <script>
    Polymer({
        is: 'terra-pictura-app',

        ready: function() {
            this._displays = this.$.system.getDisplays();
            this._display = this.$.system.getPrimaryDisplay().id
            this.config = {
                type: 'same',
                frequency: '30m'
            };
        },

        properties: {
            title: {
                type: String,
                value: 'Terra Pictura'
            },

            _mock: {
                type: Boolean,
                value: typeof require === 'undefined'
            },

            _updateFrequencies: {
                type: Array,
                value: [{
                    title: 'Every 5 minutes',
                    value: '5m'
                }, {
                    title: 'Every 30 minutes',
                    value: '30m'
                }, {
                    title: 'Every hour',
                    value: '1h'
                }, {
                    title: 'Every day',
                    value: '1d'
                }]
            },

            _configurationTypes: {
                type: Array,
                value: [{
                    title: 'Same for every display',
                    value: 'same'
                }, {
                    title: 'Spanned across all displays',
                    value: 'unique'
                }, {
                    title: 'Different for each display',
                    value: 'different'
                }]
            }
        }
    });
    </script>
</dom-module>
